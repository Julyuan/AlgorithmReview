# 第一章 算法分析基础

## 算法正确性的证明：循环不变式

定义：在循环开始及循环结束的时候都成立的表达式

循环不变式
+ 初始化：它在循环的第一轮迭代开始之前，应该是正确的
+ 保持：如果在循环的某一次迭代开始之前它是正确的，那么，在下一次迭代开始之前，它也应该保持正确。
+ 终止：当循环结束时，不变式给了我们一个有用的性质，它有助于表明算法是正确的。

例子：插入排序算法正确性验证

在外层for循环(循环变量为j)的每一轮迭代开始，包含元素A[1..j-1]的子数组已排好序。
+ 初始化：j = 2, 子数组只包含一个元素A[1]，显然有序
+ 保持：在外层for循环的循环体中，要将A[j-1]、A[j-2]、A[j-3]等元素向右 移一个位置，直到找到A[j]的适当位置，这时将A[j]的值插入。此时A[1..j]也是有序的。保证了j增量后，A[1..j-1]仍然有序。
+ 终止：当j大于n时(j＝n+1)，外层for循环结束，将j替换为n+1，子数组为A[1..n]，根据保持性A[1..n]有序，即所需的输出。

## 概率分析和随机算法

### 概率分析

定义
给定一个样本空间$S$和事件A，那么事件A对应的指示器随机变量$ I \{ A \} $定义 为 

$$
I\{A\}=\left\{\begin{array}{cc}
1 & \text { 如果A发生的话 } \\
0 & \text { 如果A不发生的话 }
\end{array}\right.
$$

引理(Lemma5.1)
给定样本空间S和S中的事件A，令$X_A = I\{A\}$，则$E[X_A]= Pr\{A\}$
<!-- 证明：由定义，有
其中Ā表示A的补S – A 即：事件A对应的指示器随机变量的期望值等于事件A发生的概率 1 A
{ } 0 A
I A ì = íî 如果 发生的话 如果 不发生的话 -->

事件$A$对应的指示器随机变量的期望值等于事件$A$发生的概率

#### 雇佣问题期望人数(顺序扫描，如果比已有的都好就进行雇佣)

+ $X$为雇用一个新的办公助理的次数
+ 令$X_i$对应于第$i$个应聘者被雇用的指示器随机变量

$$
X_{i}=I\{\text { 第 } i \text { 位应聘者被雇用 }\}=\left\{\begin{array}{cc}
1 & \text { 第 } i \text { 位应聘者被雇用 } \\
0 & \text { 否则 }
\end{array}\right.
$$

+ 由于假设顺序随机，所以前$i$个任何一个等可能的是目前最有资格
的，因此$E[X_i]=1/i$

最后得到

$$
E[X]=E\left[\sum_{i=1}^{n} X_{\mathrm{i}}\right]=\sum_{i=1}^{n} E\left[X_{\mathrm{i}}\right]=\sum_{i=1}^{n} 1 / i=\ln n+O(1)
$$

### 随机算法

随机排列数组生成

+ 给每一个元素赋一个优先级P，然后根据优先级排序
+ 随机选取元素进行依次顺序交换(使用循环不变式证明)

## 概率分析和随机算法的应用

### 生日问题

$n$个人，考虑生日各不相同的期望

定义指示性随机变量：

$
X_{i j}=I\{i \text { 和}j\text{日相同 }\}=\left\{\begin{array}{cc}
1 & \text { 如果i和j生日相同 } \\
0 & \text { 否则 }
\end{array}\right.
$

令$X$表示具有相同生日的两人对数目

$$
\begin{array}{c}
X=\sum_{i=1}^{k} \sum_{j=i+1}^{k} X_{i j} \\
E[X]=E\left[\sum_{i=1}^{k} \sum_{j=i+1}^{k} X_{i j}\right]=\sum_{i=1}^{k} \sum_{j=i+1}^{k} E\left[X_{i j}\right]=\left(\begin{array}{l}
k \\
2
\end{array}\right) \frac{1}{n}=\frac{k(k-1)}{2 n}
\end{array}
$$

### 投球问题

把相同的球随机投到b个盒子里，在每个盒子都有球之前，要投多少个球（每次投都会到一个盒子里！） 
定义“击中”为球落在空盒子里面 定义第$i$阶段为从第$(i-1)$次击中到$i$次击中之间的投球
第i阶段，所有投球击中的概率为$(b-i+1)/b$，因此投球数$n_i$的期望为$E[n_i] = b/(b-i+1)$

所以，总的投球数期望为

$$
E[n]=E\left[\sum_{i=1}^{b} n_{i}\right]=\sum_{i=1}^{b} E\left[n_{i}\right]=\sum_{i=1}^{b} \frac{b}{b-i+1}=b \sum_{i=1}^{b} \frac{1}{i}=b(\ln b+O(1))$$

### 抛硬币问题

抛一枚均匀硬币n次，期望看到连续正面的最长序列有多长？